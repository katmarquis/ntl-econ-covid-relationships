# -*- coding: utf-8 -*-
"""Models and Analysis.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1pw9P8_GHwax1t97eLDk3-CnrTa7AEdxe
"""

import pandas as pd
import numpy as np
import seaborn as sn
import matplotlib.pyplot as plt
import statsmodels.api as sm
import statsmodels.formula.api as smf

!pip install linearmodels
from linearmodels.panel import PanelOLS

from google.colab import drive
from google.colab import files
drive.mount('/content/drive')

path = "/content/drive/MyDrive/Undergrad/Junior Summer/SURF/data/"

df = pd.read_csv(path + "data_standardized.csv",index_col=0)
df.head()

s = df["Population"]
pop_cutoffs = s.quantile([0.5])
data_rural = df[(df["Population"] <= pop_cutoffs[0.5])]
data_urban = df[(df["Population"] > pop_cutoffs[0.5])]

df_20_21 = df.loc[df["Year"] <= 2021]
data_rural_20_21 = data_rural.loc[data_rural["Year"] <= 2021]
data_urban_20_21 = data_urban.loc[data_urban["Year"] <= 2021]

df_reg = pd.read_csv(path + "data_final.csv",index_col=0)
df_reg.head()

s = df_reg["Population"]
pop_cutoffs = s.quantile([0.5])
data_rural_reg = df_reg[(df_reg["Population"] <= pop_cutoffs[0.5])]
data_urban_reg = df_reg[(df_reg["Population"] > pop_cutoffs[0.5])]

df_20_21_reg = df_reg.loc[df["Year"] <= 2021]
data_rural_20_21_reg = data_rural_reg.loc[data_rural_reg["Year"] <= 2021]
data_urban_20_21_reg = data_urban_reg.loc[data_urban_reg["Year"] <= 2021]

"""## Cases and Deaths

### Cases and Deaths
"""

# new cases --> new deaths

exog_vars = ["New_Cases"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> new deaths (rural)

exog_vars = ["New_Cases"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> new deaths (urban)

exog_vars = ["New_Cases"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> new deaths

exog_vars = ["New_Cases_Lag"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> new deaths (rural)

exog_vars = ["New_Cases_Lag"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> new deaths (urban)

exog_vars = ["New_Cases_Lag"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> total deaths

exog_vars = ["Total_Cases"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> total deaths (rural)

exog_vars = ["Total_Cases"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> total deaths (urban)

exog_vars = ["Total_Cases"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> total deaths

exog_vars = ["Total_Cases_Lag"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> total deaths (rural)

exog_vars = ["Total_Cases_Lag"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> total deaths (urban)

exog_vars = ["Total_Cases_Lag"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### Cases, Stay at home order, and Deaths"""

# new cases --> new deaths

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> new deaths (rural)

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> new deaths (urban)

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> new deaths

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> new deaths (rural)

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> new deaths (urban)

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> total deaths

exog_vars = ["Total_Cases", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> total deaths (rural)

exog_vars = ["Total_Cases", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> total deaths (urban)

exog_vars = ["Total_Cases", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> total deaths

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> total deaths (rural)

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> total deaths (urban)

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### Cases and Deaths (2020-2021)"""

# new cases --> new deaths

exog_vars = ["New_Cases"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> new deaths (rural)

exog_vars = ["New_Cases"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> new deaths (urban)

exog_vars = ["New_Cases"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> new deaths

exog_vars = ["New_Cases_Lag"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> new deaths (rural)

exog_vars = ["New_Cases_Lag"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> new deaths (urban)

exog_vars = ["New_Cases_Lag"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### Cases, Stay at home order, and Deaths (2020-2021)"""

# new cases --> new deaths

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> new deaths (rural)

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> new deaths (urban)

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> new deaths

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> new deaths (rural)

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> new deaths (urban)

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""## NTL and Cases

### NTL and Monthly Cases
"""

# ntl --> new cases

exog_vars = ["NTL_SOL"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> new cases (rural)

exog_vars = ["NTL_SOL"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> new cases (urban)

exog_vars = ["NTL_SOL"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new cases

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new cases (rural)

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new cases (urban)

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ntl

exog_vars = ["New_Cases_Lag"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ntl (rural)

exog_vars = ["New_Cases_Lag"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ntl (urban)

exog_vars = ["New_Cases_Lag"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL, Stay at home order, and Monthly Cases"""

# ntl --> new cases

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> new cases (rural)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> new cases (urban)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new cases

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new cases (rural)

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new cases (urban)

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ntl

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ntl (rural)

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ntl (urban)

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL and Monthly Cases (2020-2021)"""

# ntl --> new cases

exog_vars = ["NTL_SOL"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> new cases (rural)

exog_vars = ["NTL_SOL"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> new cases (urban)

exog_vars = ["NTL_SOL"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new cases

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new cases (rural)

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new cases (urban)

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ntl

exog_vars = ["New_Cases_Lag"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ntl (rural)

exog_vars = ["New_Cases_Lag"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ntl (urban)

exog_vars = ["New_Cases_Lag"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL, Stay at home order, and Monthly Cases (2020-2021)"""

# ntl --> new cases

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> new cases (rural)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> new cases (urban)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new cases

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new cases (rural)

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new cases (urban)

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ntl

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ntl (rural)

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ntl (urban)

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL and Total Cases"""

# ntl --> total cases

exog_vars = ["NTL_SOL"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> total cases (rural)

exog_vars = ["NTL_SOL"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> total cases (urban)

exog_vars = ["NTL_SOL"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total cases

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total cases (rural)

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total cases (urban)

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ntl

exog_vars = ["Total_Cases_Lag"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ntl (rural)

exog_vars = ["Total_Cases_Lag"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ntl (urban)

exog_vars = ["Total_Cases_Lag"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL, Stay at home order, and Total Cases"""

# ntl --> total cases

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> total cases (rural)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> total cases (urban)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total cases

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total cases (rural)

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total cases (urban)

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ntl

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ntl (rural)

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ntl (urban)

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL and Total Cases (2020-2021)"""

# ntl --> total cases

exog_vars = ["NTL_SOL"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> total cases (rural)

exog_vars = ["NTL_SOL"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> total cases (urban)

exog_vars = ["NTL_SOL"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total cases

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total cases (rural)

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total cases (urban)

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ntl

exog_vars = ["Total_Cases_Lag"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ntl (rural)

exog_vars = ["Total_Cases_Lag"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ntl (urban)

exog_vars = ["Total_Cases_Lag"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL, Stay at home order, and Total Cases (2020-2021)"""

# ntl --> total cases

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> total cases (rural)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> total cases (urban)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total cases

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total cases (rural)

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total cases (urban)

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ntl

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ntl (rural)

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ntl (urban)

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""## NTL and Deaths

### NTL and Monthly Deaths
"""

# ntl --> new deaths

exog_vars = ["NTL_SOL"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> new deaths (rural)

exog_vars = ["NTL_SOL"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> new deaths (urban)

exog_vars = ["NTL_SOL"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new deaths

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new deaths (rural)

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new deaths (urban)

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new deaths lagged --> ntl

exog_vars = ["New_Deaths_Lag"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["New_Deaths_Lag"] = df_multiindex.groupby(level=0)["New_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new deaths lagged --> ntl (rural)

exog_vars = ["New_Deaths_Lag"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["New_Deaths_Lag"] = df_multiindex.groupby(level=0)["New_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new deaths lagged --> ntl (urban)

exog_vars = ["New_Deaths_Lag"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["New_Deaths_Lag"] = df_multiindex.groupby(level=0)["New_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL, Stay at home order, and Monthly Deaths"""

# ntl --> new deaths

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> new deaths (rural)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> new deaths (urban)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new deaths

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new deaths (rural)

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new deaths (urban)

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new deaths lagged --> ntl

exog_vars = ["New_Deaths_Lag", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["New_Deaths_Lag"] = df_multiindex.groupby(level=0)["New_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new deaths lagged --> ntl (rural)

exog_vars = ["New_Deaths_Lag", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["New_Deaths_Lag"] = df_multiindex.groupby(level=0)["New_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new deaths lagged --> ntl (urban)

exog_vars = ["New_Deaths_Lag", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["New_Deaths_Lag"] = df_multiindex.groupby(level=0)["New_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL and Monthly Deaths (2020-2021)"""

# ntl --> new deaths

exog_vars = ["NTL_SOL"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> new deaths (rural)

exog_vars = ["NTL_SOL"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> new deaths (urban)

exog_vars = ["NTL_SOL"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new deaths

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new deaths (rural)

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new deaths (urban)

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new deaths lagged --> ntl

exog_vars = ["New_Deaths_Lag"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["New_Deaths_Lag"] = df_multiindex.groupby(level=0)["New_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new deaths lagged --> ntl (rural)

exog_vars = ["New_Deaths_Lag"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["New_Deaths_Lag"] = df_multiindex.groupby(level=0)["New_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new deaths lagged --> ntl (urban)

exog_vars = ["New_Deaths_Lag"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["New_Deaths_Lag"] = df_multiindex.groupby(level=0)["New_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL, Stay at home order, and Monthly Deaths (2020-2021)"""

# ntl --> new deaths

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> new deaths (rural)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> new deaths (urban)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new deaths

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new deaths (rural)

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> new deaths (urban)

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new deaths lagged --> ntl

exog_vars = ["New_Deaths_Lag", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["New_Deaths_Lag"] = df_multiindex.groupby(level=0)["New_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new deaths lagged --> ntl (rural)

exog_vars = ["New_Deaths_Lag", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["New_Deaths_Lag"] = df_multiindex.groupby(level=0)["New_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new deaths lagged --> ntl (urban)

exog_vars = ["New_Deaths_Lag", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["New_Deaths_Lag"] = df_multiindex.groupby(level=0)["New_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL and Total Deaths"""

# ntl --> total deaths

exog_vars = ["NTL_SOL"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> total deaths (rural)

exog_vars = ["NTL_SOL"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> total deaths (urban)

exog_vars = ["NTL_SOL"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total deaths

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total deaths (rural)

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total deaths (urban)

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total deaths lagged --> ntl

exog_vars = ["Total_Deaths_Lag"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["Total_Deaths_Lag"] = df_multiindex.groupby(level=0)["Total_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total deaths lagged --> ntl (rural)

exog_vars = ["Total_Deaths_Lag"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["Total_Deaths_Lag"] = df_multiindex.groupby(level=0)["Total_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total deaths lagged --> ntl (urban)

exog_vars = ["Total_Deaths_Lag"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["Total_Deaths_Lag"] = df_multiindex.groupby(level=0)["Total_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL, Stay at home order, and Total Deaths"""

# ntl --> total deaths

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> total deaths (rural)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> total deaths (urban)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total deaths

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total deaths (rural)

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total deaths (urban)

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total deaths lagged --> ntl

exog_vars = ["Total_Deaths_Lag", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["Total_Deaths_Lag"] = df_multiindex.groupby(level=0)["Total_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total deaths lagged --> ntl (rural)

exog_vars = ["Total_Deaths_Lag", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["Total_Deaths_Lag"] = df_multiindex.groupby(level=0)["Total_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total deaths lagged --> ntl (urban)

exog_vars = ["Total_Deaths_Lag", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["Total_Deaths_Lag"] = df_multiindex.groupby(level=0)["Total_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL and Total Deaths (2020-2021)"""

# ntl --> total deaths

exog_vars = ["NTL_SOL"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> total deaths (rural)

exog_vars = ["NTL_SOL"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> total deaths (urban)

exog_vars = ["NTL_SOL"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total deaths

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total deaths (rural)

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total deaths (urban)

exog_vars = ["NTL_SOL_Lag"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total deaths lagged --> ntl

exog_vars = ["Total_Deaths_Lag"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["Total_Deaths_Lag"] = df_multiindex.groupby(level=0)["Total_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total deaths lagged --> ntl (rural)

exog_vars = ["Total_Deaths_Lag"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["Total_Deaths_Lag"] = df_multiindex.groupby(level=0)["Total_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total deaths lagged --> ntl (urban)

exog_vars = ["Total_Deaths_Lag"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["Total_Deaths_Lag"] = df_multiindex.groupby(level=0)["Total_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL, Stay at home order, and Total Deaths (2020-2021)"""

# ntl --> total deaths

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> total deaths (rural)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> total deaths (urban)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total deaths

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total deaths (rural)

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl lagged --> total deaths (urban)

exog_vars = ["NTL_SOL_Lag", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["NTL_SOL_Lag"] = df_multiindex.groupby(level=0)["NTL_SOL"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Total_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total deaths lagged --> ntl

exog_vars = ["Total_Deaths_Lag", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["Total_Deaths_Lag"] = df_multiindex.groupby(level=0)["Total_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total deaths lagged --> ntl (rural)

exog_vars = ["Total_Deaths_Lag", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["Total_Deaths_Lag"] = df_multiindex.groupby(level=0)["Total_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total deaths lagged --> ntl (urban)

exog_vars = ["Total_Deaths_Lag", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["Total_Deaths_Lag"] = df_multiindex.groupby(level=0)["Total_Deaths"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.NTL_SOL, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""## NTL and Economics

### NTL and UI Count
"""

# ntl --> ui count

exog_vars = ["NTL_SOL"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> ui count (rural)

exog_vars = ["NTL_SOL"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> ui count (urban)

exog_vars = ["NTL_SOL"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL, Stay at home order, and UI Count"""

# ntl --> ui count

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> ui count (rural)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> ui count (urban)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL and UI Count (2020-2021)"""

# ntl --> ui count

exog_vars = ["NTL_SOL"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> ui count (rural)

exog_vars = ["NTL_SOL"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> ui count (urban)

exog_vars = ["NTL_SOL"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL, Stay at home order, and UI Count (2020-2021)"""

# ntl --> ui count

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> ui count (rural)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> ui count (urban)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL and Employment Rate"""

# ntl --> employment rate

exog_vars = ["NTL_SOL"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> employment rate (rural)

exog_vars = ["NTL_SOL"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> employment rate (urban)

exog_vars = ["NTL_SOL"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL, Stay at home order, and Employment Rate"""

# ntl --> employment rate

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> employment rate (rural)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> employment rate (urban)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL and Employment Rate (2020-2021)"""

# ntl --> employment rate

exog_vars = ["NTL_SOL"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> employment rate (rural)

exog_vars = ["NTL_SOL"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> employment rate (urban)

exog_vars = ["NTL_SOL"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### NTL, Stay at home order, and Employment Rate (2020-2021)"""

# ntl --> employment rate

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> employment rate (rural)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# ntl --> employment rate (urban)

exog_vars = ["NTL_SOL", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""## Cases and Economics

### Cases and UI Count
"""

# new cases --> ui count

exog_vars = ["New_Cases"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> ui count (rural)

exog_vars = ["New_Cases"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> ui count (urban)

exog_vars = ["New_Cases"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ui count

exog_vars = ["New_Cases_Lag"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ui count (rural)

exog_vars = ["New_Cases_Lag"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ui count (urban)

exog_vars = ["New_Cases_Lag"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> ui count

exog_vars = ["Total_Cases"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> ui count (rural)

exog_vars = ["Total_Cases"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> ui count (urban)

exog_vars = ["Total_Cases"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ui count

exog_vars = ["Total_Cases_Lag"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ui count (rural)

exog_vars = ["Total_Cases_Lag"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ui count (urban)

exog_vars = ["Total_Cases_Lag"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### Cases, Stay at home order, and UI Count"""

# new cases --> ui count

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> ui count (rural)

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> ui count (urban)

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ui count

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ui count (rural)

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ui count (urban)

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> ui count

exog_vars = ["Total_Cases", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> ui count (rural)

exog_vars = ["Total_Cases", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> ui count (urban)

exog_vars = ["Total_Cases", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ui count

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ui count (rural)

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ui count (urban)

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### Cases and UI Count (2020-2021)"""

# new cases --> ui count

exog_vars = ["New_Cases"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> ui count (rural)

exog_vars = ["New_Cases"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> ui count (urban)

exog_vars = ["New_Cases"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ui count

exog_vars = ["New_Cases_Lag"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ui count (rural)

exog_vars = ["New_Cases_Lag"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ui count (urban)

exog_vars = ["New_Cases_Lag"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> ui count

exog_vars = ["Total_Cases"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> ui count (rural)

exog_vars = ["Total_Cases"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> ui count (urban)

exog_vars = ["Total_Cases"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ui count

exog_vars = ["Total_Cases_Lag"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ui count (rural)

exog_vars = ["Total_Cases_Lag"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ui count (urban)

exog_vars = ["Total_Cases_Lag"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### Cases, Stay at home order, and UI Count (2020-2021)"""

# new cases --> ui count

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> ui count (rural)

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> ui count (urban)

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ui count

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ui count (rural)

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> ui count (urban)

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> ui count

exog_vars = ["Total_Cases", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> ui count (rural)

exog_vars = ["Total_Cases", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> ui count (urban)

exog_vars = ["Total_Cases", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ui count

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ui count (rural)

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> ui count (urban)

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### Cases and Employment Rate"""

# new cases --> employment rate

exog_vars = ["New_Cases"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> employment rate (rural)

exog_vars = ["New_Cases"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> employment rate (urban)

exog_vars = ["New_Cases"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> employment rate

exog_vars = ["New_Cases_Lag"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> employment rate (rural)

exog_vars = ["New_Cases_Lag"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> employment rate (urban)

exog_vars = ["New_Cases_Lag"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> employment rate

exog_vars = ["Total_Cases"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> employment rate (rural)

exog_vars = ["Total_Cases"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> employment rate (urban)

exog_vars = ["Total_Cases"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> employment rate

exog_vars = ["Total_Cases_Lag"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> employment rate (rural)

exog_vars = ["Total_Cases_Lag"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> employment rate (urban)

exog_vars = ["Total_Cases_Lag"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### Cases, Stay at home order, and Employment Rate"""

# new cases --> employment rate

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> employment rate (rural)

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> employment rate (urban)

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> employment rate

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> employment rate (rural)

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> employment rate (urban)

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> employment rate

exog_vars = ["Total_Cases", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> employment rate (rural)

exog_vars = ["Total_Cases", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> employment rate (urban)

exog_vars = ["Total_Cases", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> employment rate

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> employment rate (rural)

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> employment rate (urban)

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### Cases and Employment Rate (2020-2021)"""

# new cases --> employment rate

exog_vars = ["New_Cases"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> employment rate (rural)

exog_vars = ["New_Cases"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> employment rate (urban)

exog_vars = ["New_Cases"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> employment rate

exog_vars = ["New_Cases_Lag"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> employment rate (rural)

exog_vars = ["New_Cases_Lag"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> employment rate (urban)

exog_vars = ["New_Cases_Lag"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> employment rate

exog_vars = ["Total_Cases"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> employment rate (rural)

exog_vars = ["Total_Cases"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> employment rate (urban)

exog_vars = ["Total_Cases"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> employment rate

exog_vars = ["Total_Cases_Lag"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> employment rate (rural)

exog_vars = ["Total_Cases_Lag"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> employment rate (urban)

exog_vars = ["Total_Cases_Lag"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""### Cases, Stay at home order, and Employment Rate (2020-2021)"""

# new cases --> employment rate

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> employment rate (rural)

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases --> employment rate (urban)

exog_vars = ["New_Cases", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> employment rate

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> employment rate (rural)

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# new cases lagged --> employment rate (urban)

exog_vars = ["New_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["New_Cases_Lag"] = df_multiindex.groupby(level=0)["New_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> employment rate

exog_vars = ["Total_Cases", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> employment rate (rural)

exog_vars = ["Total_Cases", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases --> employment rate (urban)

exog_vars = ["Total_Cases", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> employment rate

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> employment rate (rural)

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# total cases lagged --> employment rate (urban)

exog_vars = ["Total_Cases_Lag", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
df_multiindex["Total_Cases_Lag"] = df_multiindex.groupby(level=0)["Total_Cases"].shift(1)
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""## Incidence Rate and Death Rate"""

# national

exog_vars = ["Incidence_Rate"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Death_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# rural

exog_vars = ["Incidence_Rate"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Death_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# urban

exog_vars = ["Incidence_Rate"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Death_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""## NTL Scaled and Cases

"""

# national

exog_vars = ["NTL_SOL_wrt_Population"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Incidence_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# rural

exog_vars = ["NTL_SOL_wrt_Population"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Incidence_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# urban

exog_vars = ["NTL_SOL_wrt_Population"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Incidence_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# national

exog_vars = ["NTL_SOL_wrt_Population"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# rural

exog_vars = ["NTL_SOL_wrt_Population"]
df_multiindex = data_rural.set_index(["FIPS", pd.to_datetime(data_rural['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# urban

exog_vars = ["NTL_SOL_wrt_Population"]
df_multiindex = data_urban.set_index(["FIPS", pd.to_datetime(data_urban['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Cases, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)



"""## NTL Scaled and Deaths"""

# national

exog_vars = ["NTL_SOL_wrt_Population"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Death_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# national

exog_vars = ["NTL_SOL_wrt_Population"]
df_multiindex = df.set_index(["FIPS", pd.to_datetime(df['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# national

exog_vars = ["NTL_SOL_wrt_Population"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# rural

exog_vars = ["NTL_SOL_wrt_Population"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# urban

exog_vars = ["NTL_SOL_wrt_Population"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.New_Deaths, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""## NTL Scaled and Economics"""

# national

exog_vars = ["NTL_SOL_wrt_Population"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# rural

exog_vars = ["NTL_SOL_wrt_Population"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# urban

exog_vars = ["NTL_SOL_wrt_Population"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# national

exog_vars = ["NTL_SOL_wrt_Population"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

"""## Incidence and Economics"""

# national

exog_vars = ["Incidence_Rate", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# rural

exog_vars = ["Incidence_Rate", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# urban

exog_vars = ["Incidence_Rate", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Count, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# national

exog_vars = ["Incidence_Rate", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# rural

exog_vars = ["Incidence_Rate", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# urban

exog_vars = ["Incidence_Rate", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.UI_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# national

exog_vars = ["Incidence_Rate", "Stay_at_home_order"]
df_multiindex = df_20_21.set_index(["FIPS", pd.to_datetime(df_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# rural

exog_vars = ["Incidence_Rate", "Stay_at_home_order"]
df_multiindex = data_rural_20_21.set_index(["FIPS", pd.to_datetime(data_rural_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

# urban

exog_vars = ["Incidence_Rate", "Stay_at_home_order"]
df_multiindex = data_urban_20_21.set_index(["FIPS", pd.to_datetime(data_urban_20_21['Date'])])
exog = sm.add_constant(df_multiindex[exog_vars])
mod = PanelOLS(df_multiindex.Employment_Rate, exog, entity_effects=True, time_effects=True)
fe_res = mod.fit(cov_type='heteroskedastic')
print(fe_res)

